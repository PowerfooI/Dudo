{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Menu/assets\\scripts\\Menu\\startmenu.js"],"names":["cc","Class","extends","Component","properties","angle","radius","unitAngle","choicePageSwitch","touchSwitch","accAngle","onLoad","init","registerEventHandler","start","director","preloadScene","onClickRanking","launch","onClick","onClickStart","onClickShutDown","onClickIntro","loadScene","circle","node","getChildByName","red","blue","choicePage","getComponent","centerY","roLeft","roRight","x","y","on","event","update","dt","width","posx","Math","cos","posy","sin"],"mappings":"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","file":"startmenu.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Menu","sourcesContent":["//主菜单使用的组件\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        angle: 0,\n        radius: 180,\n        unitAngle: 0.07,\n        choicePageSwitch:false,\n        touchSwitch:false,\n        accAngle:0,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.init()\n        this.registerEventHandler()\n    },\n\n    start () {\n        //预先加载场景game\n        cc.director.preloadScene(\"game\");\n    },\n\n    //点击排行榜按钮\n    onClickRanking: function(){\n        this.choicePageSwitch = false\n        this.launch.onClick()\n    },\n\n    //点击三角形开始按钮\n    onClickStart: function(){\n        this.launch.onClickShutDown()\n        this.choicePageSwitch = true\n    },\n\n    //点击教程按钮\n    onClickIntro:function(){\n        this.launch.onClickShutDown()\n        cc.director.loadScene('introduction',()=>{\n            cc.director.preloadScene('startmenu')\n        })\n    },\n    \n    //初始化主页面\n    init:function(){\n        //绑定一些节点\n        this.circle = this.node.getChildByName('circle')\n        this.red = this.circle.getChildByName('Red')\n        this.blue = this.circle.getChildByName('Blue')\n        this.choicePage = this.node.getChildByName('choicePage')\n        this.launch = this.node.getComponent('launch')\n        \n        //初始化一些属性\n        this.centerY = 100\n        this.roLeft = true\n        this.roRight = false\n        this.red.x = -this.radius\n        this.blue.x = this.radius\n        this.red.y = this.centerY\n        this.blue.y = this.centerY\n    },\n\n    //注册一些事件\n    registerEventHandler:function() {\n        this.node.getChildByName('startBn').on('click',this.onClickStart,this)  \n        this.node.getChildByName('rankingBn').on('click',this.onClickRanking,this)\n        this.node.getChildByName('introBn').on('click',this.onClickIntro,this)\n\n        this.node.on('touchstart',function(event){\n            //点击选择页外，则隐藏选择页\n            if(this.choicePageSwitch){\n                this.choicePageSwitch = false\n            }\n\n            //在首页面按住屏幕，则屏幕中心小球加速旋转\n            if(!this.touchSwitch){\n                this.touchSwitch = true\n            }\n\n        },this);\n\n        this.node.on('touchend',function(event){\n            //结束按压，属性归零\n            this.touchSwitch = false\n            this.accAngle = 0\n        },this);\n    },\n\n    update (dt) {\n        //小球旋转的一个额外速度\n        if(this.accAngle<=0.1 && this.touchSwitch){\n            this.accAngle += 0.001\n        }\n\n        this.angle += this.unitAngle + this.accAngle\n\n        //唤出选择页\n        if(this.choicePageSwitch){\n            this.choicePage.x = this.node.width/2 - this.choicePage.width/2\n        }\n        else{\n            this.choicePage.x = this.node.width/2 + this.choicePage.width/2\n        }\n\n        //计算两个小球的新位置\n        let posx = Math.cos(this.angle) * this.radius\n        let posy = Math.sin(this.angle) * this.radius\n        this.blue.x = posx\n        this.blue.y = posy + this.centerY\n        this.red.x = -posx\n        this.red.y = -posy + this.centerY\n    },\n});\n"]}