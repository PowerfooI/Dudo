{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\myIndicator.js"],"names":["cc","Class","extends","Component","properties","currentIndex","lastIndex","underlinePrefab","default","type","Prefab","onLoad","labels","node","children","pageView","parent","_components","refresh","i","length","opacity","childnode","instantiate","addChild","width","height","setPosition","p","childrenCount","destroy","nowIndex","getCurrentPageIndex","update","dt"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAa,CADL;AAERC,mBAAU,CAFF;AAGRC,yBAAgB;AACZC,qBAAQ,IADI;AAEZC,kBAAKT,GAAGU;AAFI;AAHR,KAHP;;AAYL;;AAEAC,UAdK,oBAcK;AACN,aAAKC,MAAL,GAAc,KAAKC,IAAL,CAAUC,QAAxB;AACA,aAAKC,QAAL,GAAgB,KAAKF,IAAL,CAAUG,MAAV,CAAiBC,WAAjB,CAA6B,CAA7B,CAAhB;AACA,aAAKC,OAAL;AACH,KAlBI;;;AAoBL;AACAA,aAAQ,mBAAU;AACd,aAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAE,KAAKP,MAAL,CAAYQ,MAA5B,EAAmC,EAAED,CAArC,EAAuC;AACnC,gBAAGA,MAAI,KAAKd,YAAZ,EAAyB;AACrB,qBAAKO,MAAL,CAAYO,CAAZ,EAAeE,OAAf,GAAyB,GAAzB;AACA,oBAAIC,YAAYtB,GAAGuB,WAAH,CAAe,KAAKhB,eAApB,CAAhB;AACA,qBAAKK,MAAL,CAAYO,CAAZ,EAAeK,QAAf,CAAwBF,SAAxB;AACAA,0BAAUG,KAAV,GAAkB,GAAlB;AACAH,0BAAUI,MAAV,GAAmB,CAAnB;AACAJ,0BAAUK,WAAV,CAAsB3B,GAAG4B,CAAH,CAAK,CAAL,EAAQ,CAAC,EAAT,CAAtB;AACH,aAPD,MAQI;AACA,qBAAKhB,MAAL,CAAYO,CAAZ,EAAeE,OAAf,GAAyB,GAAzB;AACA,oBAAG,KAAKT,MAAL,CAAYO,CAAZ,EAAeU,aAAf,GAA6B,CAAhC,EAAkC;AAC9B,yBAAKjB,MAAL,CAAYO,CAAZ,EAAeL,QAAf,CAAwB,CAAxB,EAA2BgB,OAA3B;AACH;AACJ;AACJ;AACJ,KAtCI;;AAwCL;AACAC,cAAS,oBAAU;AACf,eAAO,KAAKhB,QAAL,CAAciB,mBAAd,EAAP;AACH,KA3CI;;AA6CL;AACAC,UA9CK,kBA8CGC,EA9CH,EA8CO;AACR,aAAK7B,YAAL,GAAoB,KAAK0B,QAAL,EAApB;AACA,YAAG,KAAK1B,YAAL,IAAmB,KAAKC,SAA3B,EAAqC;AACjC,iBAAKY,OAAL;AACA,iBAAKZ,SAAL,GAAiB,KAAKD,YAAtB;AACH;AACJ;AApDI,CAAT","file":"myIndicator.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["//选择页指示器组件\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        currentIndex:0,\n        lastIndex:0,\n        underlinePrefab:{\n            default:null,\n            type:cc.Prefab,\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.labels = this.node.children\n        this.pageView = this.node.parent._components[0]\n        this.refresh()\n    },\n\n    //在当前页面标签下面加入红色下划线，并降低该标签的透明度\n    refresh:function(){\n        for(let i = 0;i<this.labels.length;++i){\n            if(i===this.currentIndex){\n                this.labels[i].opacity = 255\n                let childnode = cc.instantiate(this.underlinePrefab)\n                this.labels[i].addChild(childnode)\n                childnode.width = 133 \n                childnode.height = 5\n                childnode.setPosition(cc.p(0, -30))\n            }\n            else{\n                this.labels[i].opacity = 128\n                if(this.labels[i].childrenCount>0){\n                    this.labels[i].children[0].destroy()\n                }\n            }\n        }\n    },\n\n    //获取pageview组件当前所在的页面下标\n    nowIndex:function(){\n        return this.pageView.getCurrentPageIndex()\n    },\n\n    //实时刷新指示器的显示\n    update (dt) {\n        this.currentIndex = this.nowIndex()\n        if(this.currentIndex!=this.lastIndex){\n            this.refresh()\n            this.lastIndex = this.currentIndex\n        }\n    },\n});\n"]}