{"version":3,"sources":["launch.js"],"names":["cc","Class","extends","Component","properties","display","Sprite","rankingSwitch","onLoad","left","node","getChildByName","right","shutdown","start","tex","Texture2D","active","onClick","wx","postMessage","message","setTimeout","showButtons","onClickLeft","onClickRight","onClickShutDown","hideButtons","visible","_updaetSubDomainCanvas","sharedCanvas","getOpenDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","update"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAASL,GAAGM,MADJ;AAERC,uBAAc;AAFN,KAHP;;AAQLC,UARK,oBAQG;AACJ,aAAKC,IAAL,GAAY,KAAKJ,OAAL,CAAaK,IAAb,CAAkBC,cAAlB,CAAiC,MAAjC,CAAZ;AACA,aAAKC,KAAL,GAAa,KAAKP,OAAL,CAAaK,IAAb,CAAkBC,cAAlB,CAAiC,OAAjC,CAAb;AACA,aAAKE,QAAL,GAAgB,KAAKR,OAAL,CAAaK,IAAb,CAAkBC,cAAlB,CAAiC,UAAjC,CAAhB;AACH,KAZI;AAcLG,SAdK,mBAcI;AACL,aAAKC,GAAL,GAAW,IAAIf,GAAGgB,SAAP,EAAX;;AAEA;AACA,aAAKP,IAAL,CAAUQ,MAAV,GAAmB,KAAnB;AACA,aAAKL,KAAL,CAAWK,MAAX,GAAoB,KAApB;AACA,aAAKJ,QAAL,CAAcI,MAAd,GAAuB,KAAvB;AACH,KArBI;;;AAuBL;AACAC,WAxBK,qBAwBM;AAAA;;AACP;AACA,YAAG,CAAC,KAAKX,aAAT,EAAuB;AACnB,iBAAKA,aAAL,GAAqB,IAArB;AACAY,eAAGC,WAAH,CAAe;AACXC,yBAAS;AADE,aAAf;AAGH;AACD;AACAC,mBAAW,YAAI;AACX,kBAAKC,WAAL;AACH,SAFD,EAEE,IAFF;AAGH,KApCI;;;AAsCL;AACAC,iBAAY,uBAAU;AAClBL,WAAGC,WAAH,CAAe;AACXC,qBAAQ;AADG,SAAf;AAGH,KA3CI;;AA6CL;AACAI,kBAAa,wBAAU;AACnBN,WAAGC,WAAH,CAAe;AACXC,qBAAQ;AADG,SAAf;AAGH,KAlDI;;AAoDL;AACAK,qBAAgB,2BAAU;AACtB,aAAKnB,aAAL,GAAqB,KAArB;AACAY,WAAGC,WAAH,CAAe;AACXC,qBAAQ;AADG,SAAf;AAGA,aAAKM,WAAL;AACH,KA3DI;;AA6DL;AACAA,iBAAY,uBAAU;AAClB,aAAKf,KAAL,CAAWK,MAAX,GAAoB,KAApB;AACA,aAAKJ,QAAL,CAAcI,MAAd,GAAuB,KAAvB;AACA,aAAKR,IAAL,CAAUQ,MAAV,GAAmB,KAAnB;AACA,aAAKL,KAAL,CAAWgB,OAAX,GAAqB,KAArB;AACA,aAAKf,QAAL,CAAce,OAAd,GAAwB,KAAxB;AACA,aAAKnB,IAAL,CAAUmB,OAAV,GAAoB,KAApB;AACH,KArEI;;AAuEL;AACAL,iBAAY,uBAAU;AAClB,aAAKX,KAAL,CAAWK,MAAX,GAAoB,IAApB;AACA,aAAKJ,QAAL,CAAcI,MAAd,GAAuB,IAAvB;AACA,aAAKR,IAAL,CAAUQ,MAAV,GAAmB,IAAnB;AACA,aAAKL,KAAL,CAAWgB,OAAX,GAAqB,IAArB;AACA,aAAKf,QAAL,CAAce,OAAd,GAAwB,IAAxB;AACA,aAAKnB,IAAL,CAAUmB,OAAV,GAAoB,IAApB;AACH,KA/EI;;AAiFL;AACAC,0BAlFK,oCAkFqB;AACtB,YAAI,CAAC,KAAKd,GAAV,EAAe;AACX;AACH;AACD,YAAIe,eAAeX,GAAGY,kBAAH,GAAwBC,MAA3C;AACA,aAAKjB,GAAL,CAASkB,eAAT,CAAyBH,YAAzB;AACA,aAAKf,GAAL,CAASmB,mBAAT;AACA,aAAK7B,OAAL,CAAa8B,WAAb,GAA2B,IAAInC,GAAGoC,WAAP,CAAmB,KAAKrB,GAAxB,CAA3B;AACH,KA1FI;AA4FLsB,UA5FK,oBA4FK;AACN,aAAKR,sBAAL;AACH;AA9FI,CAAT","file":"launch.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Menu","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        display: cc.Sprite,\n        rankingSwitch:false\n    },\n\n    onLoad(){\n        this.left = this.display.node.getChildByName('left')\n        this.right = this.display.node.getChildByName('right')\n        this.shutdown = this.display.node.getChildByName('shutdown')\n    },\n\n    start () {\n        this.tex = new cc.Texture2D();\n\n        //按键初始化为不可用状态\n        this.left.active = false\n        this.right.active = false\n        this.shutdown.active = false\n    },\n\n    //点击排行榜\n    onClick () {\n        // 发消息给子域\n        if(!this.rankingSwitch){\n            this.rankingSwitch = true\n            wx.postMessage({\n                message: 'Show'\n            })\n        }\n        //1秒之后显示按键\n        setTimeout(()=>{\n            this.showButtons()\n        },1000)\n    },\n\n    //点击上一页按钮\n    onClickLeft:function(){\n        wx.postMessage({\n            message:'Left'\n        })\n    },\n\n    //点击下一页按钮\n    onClickRight:function(){\n        wx.postMessage({\n            message:'Right'\n        })\n    },\n\n    //点击关闭按钮\n    onClickShutDown:function(){\n        this.rankingSwitch = false\n        wx.postMessage({\n            message:'Hide'\n        })\n        this.hideButtons()\n    },\n\n    //隐藏上一页下一页和关闭按钮\n    hideButtons:function(){\n        this.right.active = false\n        this.shutdown.active = false\n        this.left.active = false\n        this.right.visible = false\n        this.shutdown.visible = false\n        this.left.visible = false\n    },\n\n    //显示上一页下一页和关闭按钮\n    showButtons:function(){\n        this.right.active = true\n        this.shutdown.active = true\n        this.left.active = true\n        this.right.visible = true\n        this.shutdown.visible = true\n        this.left.visible = true\n    },\n\n    //实时刷新画布内容\n    _updaetSubDomainCanvas () {\n        if (!this.tex) {\n            return;\n        }\n        let sharedCanvas = wx.getOpenDataContext().canvas;\n        this.tex.initWithElement(sharedCanvas);\n        this.tex.handleLoadedTexture();\n        this.display.spriteFrame = new cc.SpriteFrame(this.tex);\n    },\n\n    update () {\n        this._updaetSubDomainCanvas()\n    }\n\n});\n"]}