{"version":3,"sources":["midRotate.js"],"names":["cc","Class","extends","Component","properties","onLoad","start","animationMoved","inputInfo","find","getComponent","preSetInfo","parentSpeed","node","parent","speed","centerY","circleInfo","moveY","width","animationInfo","moveYDebt","rotateSpeed","beginRotateDis","update","dt","dis","y","status","rotation","rotateDirection","Math","abs","rewindScale"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOL;;AAEAC,UATK,oBASI;AACL;AACH,KAXI;AAaLC,SAbK,mBAaG;;AAEJ,aAAKC,cAAL,GAAsB,CAAtB;;AAEA,YAAIC,YAAYR,GAAGS,IAAH,CAAQ,iBAAR,EAA2BC,YAA3B,CAAwC,YAAxC,EAAsDC,UAAtE;;AAEA,aAAKC,WAAL,GAAmB,KAAKC,IAAL,CAAUC,MAAV,CAAiBJ,YAAjB,CAA8B,WAA9B,EAA2CK,KAA9D;AACA,aAAKC,OAAL,GAAeR,UAAUS,UAAV,CAAqBD,OAApC;;AAEA,aAAKE,KAAL,GAAa,KAAKL,IAAL,CAAUM,KAAV,GAAkBX,UAAUY,aAAV,CAAwBC,SAAvD;AACA,aAAKC,WAAL,GAAmB,MAAM,KAAKV,WAAX,GAAyB,KAAKM,KAAjD;;AAEA,aAAKK,cAAL,GAAsB,KAAKL,KAAL,GAAa,CAAnC;AACH,KA1BI;AA4BLM,UA5BK,kBA4BEC,EA5BF,EA4BM;AACP;AACA,YAAIC,MAAM,KAAKb,IAAL,CAAUC,MAAV,CAAiBa,CAAjB,GAAqB,KAAKd,IAAL,CAAUc,CAA/B,GAAmC,KAAKX,OAAlD;;AAEA;AACA,gBAAQ,KAAKH,IAAL,CAAUC,MAAV,CAAiBJ,YAAjB,CAA8B,WAA9B,EAA2CkB,MAAnD;AACI,iBAAK,IAAL;AACI,oBAAIF,MAAM,KAAKH,cAAf,EAA+B;AAC3B,yBAAKV,IAAL,CAAUgB,QAAV,IAAsB,KAAKP,WAAL,GAAmB,KAAKT,IAAL,CAAUiB,eAAnD;AACA,yBAAKvB,cAAL,IAAuBwB,KAAKC,GAAL,CAAS,KAAKV,WAAd,CAAvB;AACH;AACD;AACJ,iBAAK,QAAL;AACI,oBAAI,KAAKf,cAAL,GAAsB,CAA1B,EAA6B;AACzB,yBAAKM,IAAL,CAAUgB,QAAV,IAAsB,KAAKP,WAAL,GAAmB,KAAKT,IAAL,CAAUC,MAAV,CAAiBmB,WAApC,GAAkD,KAAKpB,IAAL,CAAUiB,eAAlF;AACA,yBAAKvB,cAAL,IAAuBwB,KAAKC,GAAL,CAAS,KAAKV,WAAL,GAAmB,KAAKT,IAAL,CAAUC,MAAV,CAAiBmB,WAA7C,CAAvB;AACH,iBAHD,MAIK,IAAI,KAAK1B,cAAL,GAAsB,CAA1B,EAA6B,KAAKA,cAAL,GAAsB,CAAtB;AAClC;AACJ,iBAAK,KAAL;AACA,iBAAK,OAAL;AACA;AACI;AAjBR;AAmBH;AApDI,CAAT","file":"midRotate.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Animations","sourcesContent":["//中部障碍旋转组件\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        // this.rotateDirection = 1 //左转为1\n    },\n\n    start() {\n\n        this.animationMoved = 0\n\n        let inputInfo = cc.find('Controller Node').getComponent('controller').preSetInfo\n\n        this.parentSpeed = this.node.parent.getComponent('obstacles').speed\n        this.centerY = inputInfo.circleInfo.centerY\n\n        this.moveY = this.node.width - inputInfo.animationInfo.moveYDebt\n        this.rotateSpeed = 180 * this.parentSpeed / this.moveY\n\n        this.beginRotateDis = this.moveY * 3\n    },\n\n    update(dt) {\n        //到旋转中心的距离\n        let dis = this.node.parent.y + this.node.y - this.centerY\n\n        //距离旋转中心this.moveLRDis的距离开始这个动作\n        switch (this.node.parent.getComponent('obstacles').status) {\n            case \"on\":\n                if (dis < this.beginRotateDis) {\n                    this.node.rotation -= this.rotateSpeed * this.node.rotateDirection\n                    this.animationMoved += Math.abs(this.rotateSpeed)\n                }\n                break\n            case \"rewind\":\n                if (this.animationMoved > 0) {\n                    this.node.rotation += this.rotateSpeed * this.node.parent.rewindScale * this.node.rotateDirection\n                    this.animationMoved -= Math.abs(this.rotateSpeed * this.node.parent.rewindScale)\n                }\n                else if (this.animationMoved < 0) this.animationMoved = 0\n                break\n            case \"off\":\n            case \"pause\":\n            default:\n                break\n        }\n    },\n});"]}