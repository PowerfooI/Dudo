{"version":3,"sources":["disappear.js"],"names":["cc","Class","extends","Component","properties","onLoad","beginDis","start","animationMoved","inputInfo","find","getComponent","preSetInfo","spacing","obstaclesInfo","centerY","circleInfo","speedDisappear","animationInfo","disappearDefaultSpeed","node","parent","gamespeed","update","dt","dis","y","status","opacity","rewindScale"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAML;;AAEAC,UARK,oBAQI;AACL,aAAKC,QAAL,GAAgB,CAAhB;AACH,KAVI;AAYLC,SAZK,mBAYG;AACJ,aAAKC,cAAL,GAAsB,CAAtB;;AAEA,YAAIC,YAAYT,GAAGU,IAAH,CAAQ,iBAAR,EAA2BC,YAA3B,CAAwC,YAAxC,EAAsDC,UAAtE;AACA,aAAKC,OAAL,GAAeJ,UAAUK,aAAV,CAAwBD,OAAvC;AACA,aAAKE,OAAL,GAAeN,UAAUO,UAAV,CAAqBD,OAApC;AACA,aAAKE,cAAL,GAAsBR,UAAUS,aAAV,CAAwBC,qBAAxB,GAClB,KAAKC,IAAL,CAAUC,MAAV,CAAiBA,MAAjB,CAAwBV,YAAxB,CAAqC,MAArC,EAA6CW,SADjD;AAEH,KApBI;AAsBLC,UAtBK,kBAsBEC,EAtBF,EAsBM;AACP;AACA,YAAIC,MAAM,KAAKL,IAAL,CAAUC,MAAV,CAAiBK,CAAjB,GAAqB,KAAKN,IAAL,CAAUM,CAA/B,GAAmC,KAAKX,OAAlD;AACA;;AAEA,gBAAQ,KAAKK,IAAL,CAAUC,MAAV,CAAiBV,YAAjB,CAA8B,WAA9B,EAA2CgB,MAAnD;AACI,iBAAK,IAAL;AACI,oBAAIF,MAAM,KAAKnB,QAAL,GAAgB,KAAKO,OAA/B,EAAwC;AACpC;AACA,wBAAI,KAAKO,IAAL,CAAUQ,OAAV,GAAoB,KAAKX,cAAzB,IAA2C,CAA/C,EAAkD;AAAE;AAChD,6BAAKG,IAAL,CAAUQ,OAAV,IAAqB,KAAKX,cAA1B;AACA,6BAAKT,cAAL,IAAuB,KAAKS,cAA5B;AACH;AACJ;AACD;AACJ,iBAAK,QAAL;AACI,oBAAI,KAAKT,cAAL,GAAsB,CAA1B,EAA6B;AACzB,wBAAI,KAAKY,IAAL,CAAUQ,OAAV,GAAoB,KAAKX,cAAL,GAAsB,KAAKG,IAAL,CAAUC,MAAV,CAAiBQ,WAA3D,IAA0E,GAA9E,EAAmF;AAC/E,6BAAKT,IAAL,CAAUQ,OAAV,IAAqB,KAAKX,cAAL,GAAsB,KAAKG,IAAL,CAAUC,MAAV,CAAiBQ,WAA5D;AACA,6BAAKrB,cAAL,IAAuB,KAAKS,cAAL,GAAsB,KAAKG,IAAL,CAAUC,MAAV,CAAiBQ,WAA9D;AACH,qBAHD,MAIK,KAAKrB,cAAL,GAAsB,CAAtB;AACR,iBAND,MAMO,IAAI,KAAKA,cAAL,GAAsB,CAA1B,EAA6B,KAAKA,cAAL,GAAsB,CAAtB;AACpC;AACJ,iBAAK,KAAL;AACA,iBAAK,OAAL;AACA;AACI;AAtBR;AAyBH;AApDI,CAAT","file":"disappear.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Animations","sourcesContent":["//障碍消失的组件\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.beginDis = 1\n    },\n\n    start() {\n        this.animationMoved = 0\n\n        let inputInfo = cc.find('Controller Node').getComponent('controller').preSetInfo\n        this.spacing = inputInfo.obstaclesInfo.spacing\n        this.centerY = inputInfo.circleInfo.centerY\n        this.speedDisappear = inputInfo.animationInfo.disappearDefaultSpeed * \n            this.node.parent.parent.getComponent('game').gamespeed\n    },\n\n    update(dt) {\n        //到旋转中心的距离\n        let dis = this.node.parent.y + this.node.y - this.centerY\n        //距离旋转中心this.beginDis * this.spacing的距离开始这个动作\n\n        switch (this.node.parent.getComponent('obstacles').status) {\n            case \"on\":\n                if (dis < this.beginDis * this.spacing) {\n                    //movedown只运动一个spacing\n                    if (this.node.opacity - this.speedDisappear >= 0) { // && this.animationMoved < 255) {  \n                        this.node.opacity -= this.speedDisappear\n                        this.animationMoved += this.speedDisappear\n                    }\n                }\n                break\n            case \"rewind\":\n                if (this.animationMoved > 0) {\n                    if (this.node.opacity + this.speedDisappear * this.node.parent.rewindScale <= 250) {\n                        this.node.opacity += this.speedDisappear * this.node.parent.rewindScale\n                        this.animationMoved -= this.speedDisappear * this.node.parent.rewindScale\n                    }\n                    else this.animationMoved = 0\n                } else if (this.animationMoved < 0) this.animationMoved = 0\n                break\n            case \"off\":\n            case \"pause\":\n            default:\n                break\n        }\n\n    },\n});"]}