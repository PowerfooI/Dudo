{"version":3,"sources":["moveLR.js"],"names":["cc","Class","extends","Component","properties","onLoad","speedScale","start","animationMoved","inputInfo","find","getComponent","preSetInfo","parentSpeed","node","parent","speed","centerY","circleInfo","Horwidth","Math","abs","width","x","moveLRDis","update","dt","dis","y","status","num","parseInt","rewindScale"],"mappings":"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","file":"moveLR.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Animations","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        \n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        // this.beginDis = 1\n        this.speedScale = 1 //为1，考虑从左往右的情况，从右往左改为-1\n    },\n\n    start() {\n        this.animationMoved = 0\n\n        let inputInfo = cc.find('Controller Node').getComponent('controller').preSetInfo\n        // this.parentSpeed = inputInfo.obstaclesInfo.speed\n        this.parentSpeed = this.node.parent.getComponent('obstacles').speed\n        this.centerY = inputInfo.circleInfo.centerY\n        // this.rewindScale = inputInfo.animationInfo.rewindScale\n\n        this.Horwidth = Math.abs(this.node.parent.width - 2 * this.node.x)\n\n        this.moveLRDis = 3.5 * this.Horwidth / Math.abs(this.speedScale)\n    },\n\n    update(dt) {\n        // console.log(this.speedScale)\n        //到旋转中心的距离\n        let dis = this.node.parent.y + this.node.y - this.centerY\n\n        //距离旋转中心this.moveLRDis的距离开始这个动作\n        switch (this.node.parent.getComponent('obstacles').status) {\n            case \"on\":\n                if (dis < this.moveLRDis) {\n                    if (this.animationMoved < 8 * this.Horwidth) {\n                        let num = parseInt(this.animationMoved / this.Horwidth)\n                        if (num === 0 || num === 4)\n                            this.node.x += this.parentSpeed * this.speedScale\n                        else if (num === 2 || num === 6)\n                            this.node.x -= this.parentSpeed * this.speedScale\n\n                        this.animationMoved += Math.abs(this.parentSpeed * this.speedScale)\n                    }\n                }\n                break\n            case \"rewind\":\n                if (this.animationMoved > 0) {\n                    //需要移动\n                    let num = parseInt(this.animationMoved / this.Horwidth)\n                    if (num === 0 || num === 4)\n                        this.node.x -= this.parentSpeed * this.speedScale * this.node.parent.rewindScale\n                    else if (num === 2 || num === 6)\n                        this.node.x += this.parentSpeed * this.speedScale * this.node.parent.rewindScale\n\n                    this.animationMoved -= Math.abs(this.parentSpeed * this.speedScale * this.node.parent.rewindScale)\n                }\n                else if (this.animationMoved < 0) this.animationMoved = 0\n                break\n            case \"off\":\n            case \"pause\":\n            default:\n                break\n        }\n    },\n});"]}