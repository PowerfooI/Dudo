{"version":3,"sources":["moveDown.js"],"names":["cc","Class","extends","Component","properties","onLoad","beginDis","speedScale","start","animationMoved","inputInfo","find","getComponent","preSetInfo","parentSpeed","node","parent","speed","spacing","obstaclesInfo","centerY","circleInfo","update","dt","dis","y","status","rewindScale"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOL;;AAEAC,UATK,oBASI;AACL,aAAKC,QAAL,GAAgB,CAAhB;AACA,aAAKC,UAAL,GAAkB,CAAlB;AACH,KAZI;AAcLC,SAdK,mBAcG;AACJ,aAAKC,cAAL,GAAsB,CAAtB;;AAEA,YAAIC,YAAYV,GAAGW,IAAH,CAAQ,iBAAR,EAA2BC,YAA3B,CAAwC,YAAxC,EAAsDC,UAAtE;;AAEA,aAAKC,WAAL,GAAmB,KAAKC,IAAL,CAAUC,MAAV,CAAiBJ,YAAjB,CAA8B,WAA9B,EAA2CK,KAA9D;AACA,aAAKC,OAAL,GAAeR,UAAUS,aAAV,CAAwBD,OAAvC;;AAEA,aAAKE,OAAL,GAAeV,UAAUW,UAAV,CAAqBD,OAApC;AACH,KAvBI;AAyBLE,UAzBK,kBAyBEC,EAzBF,EAyBM;;AAEP;AACA,YAAIC,MAAM,KAAKT,IAAL,CAAUC,MAAV,CAAiBS,CAAjB,GAAqB,KAAKV,IAAL,CAAUU,CAA/B,GAAmC,KAAKL,OAAlD;AACA;AACA,gBAAQ,KAAKL,IAAL,CAAUC,MAAV,CAAiBJ,YAAjB,CAA8B,WAA9B,EAA2Cc,MAAnD;AACI,iBAAK,IAAL;AACI;AACA,oBAAIF,MAAM,KAAKlB,QAAL,GAAgB,KAAKY,OAA/B,EAAwC;AACpC,wBAAI,KAAKT,cAAL,GAAsB,KAAKS,OAA/B,EAAwC;AACpC,6BAAKH,IAAL,CAAUU,CAAV,IAAe,KAAKX,WAAL,GAAmB,KAAKP,UAAvC;AACA,6BAAKE,cAAL,IAAuB,KAAKK,WAAL,GAAmB,KAAKP,UAA/C;AACH;AACJ;AACD;AACJ,iBAAK,QAAL;AACI,oBAAI,KAAKE,cAAL,GAAsB,CAA1B,EAA6B;AACzB,yBAAKM,IAAL,CAAUU,CAAV,IAAe,KAAKX,WAAL,GAAmB,KAAKP,UAAxB,GAAqC,KAAKQ,IAAL,CAAUC,MAAV,CAAiBW,WAArE;AACA,yBAAKlB,cAAL,IAAuB,KAAKK,WAAL,GAAmB,KAAKP,UAAxB,GAAqC,KAAKQ,IAAL,CAAUC,MAAV,CAAiBW,WAA7E;AACH,iBAHD,MAIK,IAAI,KAAKlB,cAAL,GAAsB,CAA1B,EAA6B,KAAKA,cAAL,GAAsB,CAAtB;AAClC;AACJ,iBAAK,KAAL;AACA,iBAAK,OAAL;AACA;AACI;AApBR;AAsBH;AApDI,CAAT","file":"moveDown.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Animations","sourcesContent":["//障碍向下迅速移动的组件\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.beginDis = 1\n        this.speedScale = 1\n    },\n\n    start() {\n        this.animationMoved = 0\n\n        let inputInfo = cc.find('Controller Node').getComponent('controller').preSetInfo\n\n        this.parentSpeed = this.node.parent.getComponent('obstacles').speed\n        this.spacing = inputInfo.obstaclesInfo.spacing\n\n        this.centerY = inputInfo.circleInfo.centerY\n    },\n\n    update(dt) {\n        \n        //到旋转中心的距离\n        let dis = this.node.parent.y + this.node.y - this.centerY\n        //距离旋转中心this.beginDis * this.spacing的距离开始这个动作\n        switch (this.node.parent.getComponent('obstacles').status) {\n            case \"on\":\n                //movedown只运动一个spacing\n                if (dis < this.beginDis * this.spacing) {\n                    if (this.animationMoved < this.spacing) {\n                        this.node.y -= this.parentSpeed * this.speedScale\n                        this.animationMoved += this.parentSpeed * this.speedScale\n                    }\n                }\n                break\n            case \"rewind\":\n                if (this.animationMoved > 0) {\n                    this.node.y += this.parentSpeed * this.speedScale * this.node.parent.rewindScale\n                    this.animationMoved -= this.parentSpeed * this.speedScale * this.node.parent.rewindScale\n                }\n                else if (this.animationMoved < 0) this.animationMoved = 0\n                break\n            case \"off\":\n            case \"pause\":\n            default:\n                break\n        }\n    },\n});"]}