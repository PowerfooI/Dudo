{"version":3,"sources":["page.js"],"names":["cc","Class","extends","Component","properties","bnTemps","default","type","Prefab","tagTemps","onLoad","init","registerEventHandler","minY","node","parent","height","maxY","y","on","event","stopPropagation","getDelta","setButtons","chapterNum","buttonNum","posY","log","name","newTag","instantiate","addChild","setPosition","p","posX","i","newBn","start"],"mappings":"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","file":"page.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["//选择页面的总组件，使单个页面支持上下滑动\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bnTemps:{\n            default:[],\n            type:[cc.Prefab]\n        },\n        tagTemps:{\n            default:[],\n            type:[cc.Prefab]\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.init()\n        this.registerEventHandler()\n    },\n\n    init:function(){\n        //初始化页面上下滑动的极限Y值\n        this.minY = this.node.parent.height/2 - this.node.height/2\n        this.maxY = this.minY + this.node.height - this.node.parent.height\n        this.node.y = this.minY\n    },\n\n    registerEventHandler:function(){\n\n        //触屏开始和结束事件，不能传播到父节点，否则会让选择页面关闭\n        this.node.on('touchstart',function(event){\n            event.stopPropagation()\n        },this)\n\n        this.node.on('touchend',function(event){\n            event.stopPropagation()\n        },this)\n\n        //移动触点滑动的距离\n        this.node.on('touchmove',function(event){\n            if(this.node.y+event.getDelta().y>=this.minY && this.node.y+event.getDelta().y<=this.maxY){\n                this.node.y += event.getDelta().y\n            }\n            else if(this.node.y+event.getDelta().y < this.minY){\n                this.node.y = this.minY\n            }\n            else if(this.node.y+event.getDelta().y > this.maxY){\n                this.node.y = this.maxY\n            }\n            event.stopPropagation()\n        },this)\n    },\n\n    setButtons:function(chapterNum,buttonNum){\n        \n        //chapterNum章节数，buttonNum按键数(最大不超过9)\n        let posY = this.node.height / 2 - 150\n        \n        if(chapterNum>=1&&chapterNum<=7){\n            posY -= (chapterNum-1)*350 \n        }\n        else{\n            cc.log(`章节数错误！问题出现在${this.node.name}的${this.name}组件里！`)\n        }\n\n        if(buttonNum<1){\n            cc.log(`按键数不能少于1个！问题出现在${this.node.name}的${this.name}组件里！`)\n            return\n        }\n\n        let newTag = cc.instantiate(this.tagTemps[chapterNum-1])\n        this.node.addChild(newTag)\n\n        newTag.setPosition(cc.p(-150,posY+100))\n\n        let posX = -150\n        for(let i = 1;i<=buttonNum;++i){\n            let newBn = cc.instantiate(this.bnTemps[i])\n            this.node.addChild(newBn)\n            newBn.name = `${chapterNum}_${i}`\n            newBn.setPosition(cc.p(posX,posY))\n            if(i%3===0){\n                posX = -150\n                posY -= 110 //每行按键群的纵向间隔\n            }\n            else posX += 150\n        }\n    },\n\n    start () {\n    },\n\n    // update (dt) {},\n});\n"]}